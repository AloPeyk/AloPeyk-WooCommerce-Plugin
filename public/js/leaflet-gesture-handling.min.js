L.Map.mergeOptions({gestureHandlingText:{}}),L.GestureHandler=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.on(this._map._container,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map._container,"mouseout",this._handleMouseOut,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"mousewheel",this._handleScroll,this),L.DomEvent.off(this._map._container,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map._container,"mouseout",this._handleMouseOut,this)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setLanguageContent:function(){var e;if(this._map.options.gestureHandlingText&&this._map.options.gestureHandlingText.touch)e=this._map.options.gestureHandlingText;else{var t=this._getUserLanguage();t||(t="en"),L.GestureHander_LanguageContent[t]&&(e=L.GestureHander_LanguageContent[t]),e||-1===t.indexOf("-")||(t=t.split("-")[0],e=L.GestureHander_LanguageContent[t]),e||(t="en",e=L.GestureHander_LanguageContent[t])}var n=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(n=!0);var a=e.scroll;n&&(a=e.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",e.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",a)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(e){for(var t=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-close-button"],n=!1,a=0;a<t.length;a++)e.target.classList.contains(t[a])&&(n=!0);n?e.target.classList.remove("leaflet-gesture-handling-touch-warning"):"touchmove"!==e.type&&"touchstart"!==e.type||1!==e.touches.length?e.target.classList.remove("leaflet-gesture-handling-touch-warning"):(e.currentTarget.classList.add("leaflet-gesture-handling-touch-warning"),this._disableInteractions())},_isScrolling:!1,_handleScroll:function(e){e.metaKey||e.ctrlKey?(e.preventDefault(),this._map._container.classList.remove("leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(this._map._container.classList.add("leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout(function(){for(var e=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),t=0;t<e.length;t++)e[t].classList.remove("leaflet-gesture-handling-scroll-warning")},1e3))},_handleMouseOver:function(e){this._enableInteractions()},_handleMouseOut:function(e){this._disableInteractions()}}),L.Map.addInitHook("addHandler","gestureHandling",L.GestureHandler);